walk_kjlb 5.8m

walk_kjlb_turn 3.0m 直進+左折+4.0m 直進

## 回転の扱い

角速度がy方向にpeekポイントが存在した場合、この人は右に90度曲がっているものだと考えられる。
角速度がx方向にpeekポイントが存在した場合、この人は左に90度曲がっているものだと考えられる。

角速度がz方向にpeekポイントが存在している場合は、この値は異常値であると考えられる。

## 階段の踊り場の長さを調べる（踊り場の形を提示する）

踊り場の長さを計算する
それぞれの階段で踊り場の歩数は一致しない可能性が高い
また歩幅が通常の歩幅とは異なる（短くなっている場合が多い）

階段を最後に登り切る方の足の動きは値から読み取るのは難しいため、（歩数を取るのが目的ではないので）ないことにするか、1足すか

また階段を終わったときに回っている場合、その次も別の階段を登っている可能性が高い。

## 階段を登っているのか、地面を歩いているのかを検出する

現状ではただ単に上下幅の高いところを取っているため、階段だけ、地面だけの場合は検出が容易にできるが、どちらも合わさっている場合に検出ができない

解決策として、普通の歩行と、階段の歩行ではy軸の速度の変化が異なるため、閾値を複数設けることで改善ができる


# 11/30メモ

階段を登っているときと降っているときどうするのか

1. ノルムをとって、0.3より高い場所を探す
1. ある場合はその区間を階段区間とする
2. それ以外のところは歩行区間
3. 歩行区間は普通に歩数を取る
4. 階段を登っているところで、前後のposition_yを比較してプラスになっていれば、上昇、マイナスになっていれば下降と判断
5. 下降の場合はその区間のベクトルを反転させる
6. 2つの閾値をもって、踊り場と階段を検出
7. それぞれの移動距離をグラフとして作成
8. それらのグラフを統合して一枚のマップにする

